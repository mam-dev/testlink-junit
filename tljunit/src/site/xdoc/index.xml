<?xml version="1.0" encoding="UTF-8"?>
<document xmlns="http://maven.apache.org/XDOC/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/XDOC/2.0 xdoc-2.0.xsd">
    <properties>
        <title>Introduction</title>
    </properties>
    <body>
        <section name="Introduction">
            <p>
                By annotating your tests with
                <a href="apidocs/net/oneandone/testlinkjunit/tljunit/TestLink.html">
                    <tt>TestLink</tt>
                </a>
                test results will be written to a
                <tt>XML</tt>
                file which may be imported to a running
                <a href="http://www.teamst.org/">Testlink</a>
                instance as described in the
                <a href="http://www.teamst.org/_tldoc/1.8/user_manual.pdf">user manual</a>
                .
            </p>
        </section>
        <section name="Usage">
            <subsection name="Annotating your tests">
                <p>
                    You have to annotate your tests and provide either an
                    <tt>externalId</tt>
                    or
                    <tt>internalId</tt>
                </p>
                <pre><![CDATA[
@Test
@TestLink(internalId=1)
public void testPassed() {
    assertTrue(true);
}

                    ]]></pre>
                <pre><![CDATA[
@Test
@TestLink(internalId=2)
@Ignore("Just ignore this")
public void testIgnored() {
    assertTrue(true);
}

                    ]]></pre>
                <pre><![CDATA[
@Test
@TestLink(externalId="ASSUMPTION_FAILED")
public void testWithFailingAssumption() {
    assumeTrue(false);
}

                    ]]></pre>
                <pre><![CDATA[
@Test
@TestLink(externalId="PROJECT-1")
public void testExternalId() {
    assertTrue(true);
}
                    ]]></pre>
                <p>
                    Tests annotated with
                    <tt>Ignore</tt>
                    will be marked as
                    <tt>BLOCKED</tt>
                    as well as tests with failing assumptions.
                </p>
            </subsection>
            <subsection name="Configuring the maven-surefire-plugin.">
                <p>
                    You have to configure the surefire plugin to use the additional
                    <a href="apidocs/net/oneandone/testlinkjunit/tljunit/TestLinkXmlRunListener.html">
                        <tt>TestLinkXmlRunListener</tt>
                    </a>
                    .
                    As can be seen below, the username and file-location for the result file may be provided as system properties.
                </p>
                <pre><![CDATA[
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.10</version>
                <dependencies>
                    <dependency>
                        <groupId>net.oneandone.testlinkjunit</groupId>
                        <artifactId>tljunit</artifactId>
                        <version>1.X</version>
                    </dependency>
                </dependencies>
                <configuration>
                    <properties>
                        <property>
                            <name>listener</name>
                            <value>net.oneandone.testlinkjunit.tljunit.TestLinkXmlRunListener</value>
                        </property>
                    </properties>
                    <systemPropertyVariables>
                        <testlink.results>target/my-testlink.xml</testlink.results>
                        <testlink.userName>memyselfandi</testlink.userName>
                    </systemPropertyVariables>
                </configuration>
            </plugin>
        </plugins>
    </build>
        ]]></pre>
            <p>
                Now running
                <kbd>mvn test</kbd>
                will run your tests and put the resulting TestLink XML file into
                <tt>target/my-testlink.xml</tt>
                using
                <tt>memyselfandi</tt>
                as name of the user who executed the test run.
            </p>
            </subsection>
        </section>
    </body>
</document>
